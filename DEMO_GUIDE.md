# 🎬 系统演示指南

本文档提供完整的系统演示流程，适用于项目展示、功能验收等场景。

---

## 📋 演示前准备

### 环境检查
```bash
# 1. 检查 MySQL
mysql -u root -p -e "SELECT VERSION();"

# 2. 检查 Redis
redis-cli ping  # 应返回 PONG

# 3. 检查 Node.js
node -v  # 应 >= 18.0

# 4. 检查 JDK
java -version  # 应 = 21
```

### 启动服务
```bash
# 终端 1: 启动后端
cd backend
mvn spring-boot:run

# 终端 2: 启动前端
cd frontend
npm run dev
```

### 浏览器准备
- 打开 Chrome/Edge 浏览器
- 打开开发者工具（F12）
- 准备好至少2个浏览器窗口（用于演示实时推送）

---

## 🎯 演示流程（约15分钟）

### Part 1: 系统介绍（2分钟）

**讲解要点：**
1. 这是一个智慧电竞酒店管理系统
2. 采用前后端分离架构
3. 核心特色：
   - **二次鉴权机制**：不仅要登录，还要有入住权限才能控制房间
   - **实时硬件监控**：WebSocket推送，每5秒更新
   - **智能报警**：连续3次异常才触发，避免误报

**展示内容：**
- 打开 http://localhost:5173 展示登录页
- 简单介绍技术栈（Vue 3 + Spring Boot）

---

### Part 2: 用户注册与登录（3分钟）

**操作步骤：**

1. **演示注册流程**
   ```
   手机号：13900139001
   验证码：[点击获取，从后端控制台查看]
   密码：demo123456
   确认密码：demo123456
   姓名：演示用户
   身份证号：320102199001011234
   ```
   - 点击"获取验证码"
   - 切换到后端终端，展示控制台输出的验证码
   - 回到浏览器填写验证码
   - 点击"注册"
   - **亮点**：展示表单验证（手机号格式、身份证号格式、密码一致性）

2. **演示登录流程**
   ```
   手机号：13900139001
   密码：demo123456
   ```
   - 注册成功后自动切换到登录标签
   - 输入手机号和密码
   - 点击"登录"
   - **亮点**：展示登录成功后自动跳转

3. **展示控制台首页**
   - 指出统计卡片（空闲房间、已入住等）
   - 介绍侧边栏导航
   - **亮点**：数据实时统计

---

### Part 3: 房态管理（4分钟）

**操作步骤：**

1. **查看房间列表**
   - 点击左侧菜单"房态管理"
   - 展示所有房间卡片
   - **亮点**：不同状态用不同颜色区分

2. **筛选房间**
   - 点击"空闲"按钮
   - 只显示空闲房间
   - 点击"全部"恢复

3. **办理入住**
   - 选择一个空闲房间（如201）
   - 点击"办理入住"
   - 填写入住信息：
     ```
     预计入住：[当前时间]
     预计退房：[明天同一时间]
     押金金额：500
     ```
   - 点击"确认入住"
   - **亮点**：
     - 展示 Room-Auth-Token 的生成（F12 → Application → Local Storage）
     - 房间卡片立即变为红色（已入住）

4. **查看房间详情**
   - 点击刚入住的房间的"查看详情"
   - 展示房间配置信息

5. **办理退房**
   - 点击"办理退房"
   - 确认退房
   - **亮点**：
     - 展示费用计算（按小时）
     - 积分赠送（1元=10积分）
     - Room-Auth-Token 被清除
     - 房间变为黄色（待清洁）

---

### Part 4: 硬件监控大屏（5分钟）

**操作步骤：**

1. **展示监控大屏**
   - 点击左侧菜单"硬件监控"
   - **亮点**：WebSocket 连接状态（绿色脉动图标）

2. **讲解监控数据**
   - 指出每个房间卡片的内容：
     - CPU温度（正态分布生成）
     - GPU温度
     - 网络延迟
     - 连续异常次数
   - **亮点**：每5秒自动更新（观察时间戳变化）

3. **演示健康状态**
   - 指出绿色房间：正常
   - 指出黄色房间：预警（温度接近阈值）
   - （如有）指出红色房间：告警

4. **触发故障测试**
   - 选择一个绿色房间
   - 点击"触发故障"
   - **亮点**：
     - 房间立即变为红色
     - 出现脉动红光动画
     - 弹出告警提示
     - 未处理告警计数 +1

5. **查看告警记录**
   - 点击顶部"告警记录"按钮
   - 展示告警列表
   - **亮点**：
     - 告警类型分类
     - 告警时间
     - 处理状态

6. **处理告警**
   - 选择一条未处理告警
   - 点击"处理"
   - **亮点**：
     - 状态变为"已处理"
     - 未处理告警计数 -1

7. **演示实时推送（核心）**
   - 打开第二个浏览器窗口
   - 登录同一账号
   - 进入硬件监控页面
   - 在第一个窗口触发故障
   - **亮点**：第二个窗口同时收到告警（WebSocket广播）

---

### Part 5: 技术亮点展示（1分钟）

**打开开发者工具展示：**

1. **Network标签**
   - 展示 API 请求（RESTful设计）
   - 展示 WebSocket 连接（ws://localhost:5173/api/ws）

2. **Application标签**
   - 展示 localStorage 存储的 Token
   - 对比普通 Token 和 Room-Auth-Token

3. **Console标签**
   - 展示 WebSocket 接收的消息
   - 展示每5秒的硬件数据推送

---

### Part 6: 二次鉴权机制演示（可选，2分钟）

**场景设计：**

1. **有权限的用户**
   - 当前已登录且已入住
   - 可以访问房间控制接口（虽然前端未实现UI，但可以用Swagger测试）

2. **无权限的用户**
   - 登出后重新登录
   - 未办理入住
   - 尝试访问需要 @RoomAuthRequired 的接口
   - **亮点**：返回 403 Forbidden

3. **权限过期**
   - 办理退房后
   - Room-Auth-Token 被销毁
   - 无法再访问房间控制功能

---

## 🎨 演示技巧

### 突出视觉效果
- 使用全屏模式（F11）展示前端
- 调整浏览器缩放比例（Ctrl + 滚轮）使界面更清晰
- 触发多个房间故障，展示红色脉动动画的震撼效果

### 强调技术难点
- **正态分布数据生成**：不是随机值，而是符合真实设备特征
- **连续异常检测**：防止偶发波动导致误报
- **WebSocket双向通信**：不是轮询，而是服务器主动推送
- **二次鉴权设计**：两层权限控制，更安全

### 数据准备
- 提前在数据库插入4-6个房间
- 确保至少有2个空闲房间
- 可以手动在数据库触发异常数据：
  ```sql
  UPDATE tb_hardware_status 
  SET cpu_temp = 99.0, health_level = 'RED' 
  WHERE room_id = 1;
  ```

---

## 🐛 常见问题处理

### 问题1: WebSocket 连接失败
**症状**：监控页面显示"WebSocket 未连接"  
**原因**：后端未启动或端口占用  
**解决**：重启后端服务，检查 8080 端口

### 问题2: 验证码收不到
**症状**：点击"获取验证码"后没反应  
**原因**：后端未连接 Redis（模拟场景下会输出到控制台）  
**解决**：查看后端终端输出

### 问题3: 房间状态不更新
**症状**：办理入住/退房后房间卡片颜色不变  
**原因**：前端缓存  
**解决**：点击"刷新"按钮或重新进入页面

### 问题4: 跨域错误
**症状**：浏览器 Console 报 CORS 错误  
**原因**：Vite 代理配置问题  
**解决**：检查 vite.config.js 中的 proxy 设置

---

## 📊 演示数据参考

### 测试账号
| 手机号 | 密码 | 姓名 | 说明 |
|--------|------|------|------|
| 13900139001 | demo123456 | 演示用户A | 用于演示注册登录 |
| 13900139002 | demo123456 | 演示用户B | 用于演示多用户场景 |

### 房间数据
| 房号 | 房型 | 价格/小时 | 初始状态 |
|------|------|-----------|----------|
| 201 | 双人电竞房 | 50 | VACANT |
| 202 | 双人电竞房 | 50 | VACANT |
| 301 | 五人电竞房 | 120 | VACANT |
| 302 | 五人电竞房 | 120 | OCCUPIED |

---

## 🎤 演讲稿参考

### 开场白
"大家好，今天为大家展示的是智慧电竞酒店管理系统。这是一个B/S架构的全栈Web应用，采用Vue 3 + Spring Boot技术栈，实现了酒店管理的核心功能以及实时硬件监控。系统的两大创新点是二次鉴权机制和基于WebSocket的实时监控系统。"

### 二次鉴权讲解
"传统系统只要登录就能访问所有功能，但在酒店场景中，我们需要确保只有已入住的客人才能控制房间设备。因此我设计了二次鉴权机制：第一层是普通登录，获得基础访问权限；第二层是入住验证，只有办理入住后才能获得Room-Auth-Token，这个Token绑定了房间号和入住记录，退房时自动销毁。"

### 硬件监控讲解
"硬件监控模块通过WebSocket实现实时数据推送。后端定时任务每5秒生成一次模拟数据，使用正态分布算法使数据符合真实设备特征。系统会自动判断健康等级，连续3次异常才触发报警，避免误报。报警后自动生成维修工单，形成闭环管理。"

### 实时性展示
"现在我打开两个浏览器窗口，模拟两个管理员同时在线。当我在第一个窗口触发故障时，第二个窗口会同步收到告警推送。这就是WebSocket的优势，服务器主动推送，无需客户端轮询，实时性更好，服务器压力更小。"

### 结束语
"这个系统目前已完成核心功能，包括用户认证、房态管理、硬件监控等模块。未来计划扩展POS收银、社交匹配、积分商城等功能。感谢大家观看！"

---

## 📸 截图建议

演示前准备好以下截图（用于 PPT 或文档）：

1. 登录页面（展示UI设计）
2. 控制台首页（展示统计数据）
3. 房态管理页面（展示不同状态的房间）
4. 硬件监控大屏（展示红色告警状态）
5. 告警记录弹窗（展示数据列表）
6. 开发者工具 Network 标签（展示 WebSocket 连接）
7. 数据库表结构截图（展示二次鉴权设计）

---

## 🏆 加分项

### 性能优化展示
- 展示前端懒加载（路由切换速度）
- 展示 WebSocket 心跳机制（保持长连接）
- 展示 Redis 缓存（验证码存储）

### 安全性展示
- 展示密码加密（BCrypt）
- 展示 JWT Token 过期处理
- 展示二次鉴权拦截器源码

### 可扩展性讲解
- 模块化设计（前后端分离）
- RESTful API 规范
- 微服务架构预留接口

---

## 📝 演示后 Q&A 准备

**Q: 为什么使用正态分布生成数据？**  
A: 真实设备的温度、延迟等指标通常符合正态分布，这样生成的模拟数据更接近真实场景，便于测试报警阈值。

**Q: 二次鉴权和 RBAC 有什么区别？**  
A: RBAC 是基于角色的权限控制（如管理员、普通用户），二次鉴权是基于业务状态的权限控制（是否入住）。两者可以结合使用。

**Q: WebSocket 和长轮询相比有什么优势？**  
A: WebSocket 是全双工通信，服务器可以主动推送，减少网络开销；长轮询需要客户端不断发起请求，浪费资源且实时性差。

**Q: 如果房间数量很多（如1000个），系统性能如何？**  
A: 可以优化：1) 前端使用虚拟滚动；2) 后端按楼层/区域分组推送；3) 使用 Redis 缓存减少数据库查询。

**Q: 系统如何保证高可用？**  
A: 可以部署多个后端实例 + Nginx 负载均衡，数据库主从复制，Redis 哨兵模式，WebSocket 使用 Sticky Session 保持连接。

---

祝演示成功！🎉
