# .gitignore 更新说明

## 更新时间
2025-12-21

## 更新原因
Phase 5 报表与决策支持子系统开发完成后，需要忽略导出的报表文件和其他临时文件。

## 新增忽略规则

### 1. 前端编译缓存
```
.eslintcache
.stylelintcache
*.tsbuildinfo
```

### 2. Phase 5 报表系统文件
```
# 报表系统测试和导出文件（Phase 5）
financial_report_*.csv
hardware_analysis_*.csv
dashboard_*.json
report_export_*.csv
*_report_test.json
```

### 3. 导出的报表文件（通用）
```
# 导出的报表文件（CSV/Excel）
*.csv
!database/*.sql      # 保留数据库SQL文件
exports/
reports/
financial_reports/
hardware_reports/
```

### 4. 报表缓存目录
```
# 报表缓存和临时数据
.report-cache/
report_temp/
```

### 5. 后端构建产物补充
```
backend/target/*.jar.original
backend/target/surefire-reports/
backend/target/failsafe-reports/
```

## 建议的文件管理策略

### 应该提交到Git的文件
- ✅ 源代码文件（.java, .vue, .js, .ts）
- ✅ 配置文件模板（application.yml, docker-compose.yml）
- ✅ 数据库schema和初始化脚本（database/*.sql）
- ✅ 文档文件（*.md, Phase*_*.md）
- ✅ Docker配置（Dockerfile, docker-compose.yml）
- ✅ 项目配置（pom.xml, package.json）

### 不应该提交的文件
- ❌ 构建产物（target/, dist/, node_modules/）
- ❌ IDE配置（.idea/, .vscode/）
- ❌ 导出的报表文件（*.csv, reports/）
- ❌ 日志文件（logs/, *.log）
- ❌ 临时文件（*.tmp, *.temp）
- ❌ 测试数据和输出（*_test.json, test_output/）
- ❌ 敏感信息（.env, *.key, application-prod.yml）

## 清理已跟踪的不必要文件

如果某些文件已经被Git跟踪，但现在想忽略它们，使用以下命令：

```bash
# 停止跟踪某个文件，但保留本地文件
git rm --cached <file>

# 停止跟踪某个目录
git rm -r --cached <directory>

# 示例：停止跟踪已导出的CSV文件
git rm --cached *.csv

# 示例：停止跟踪target目录
git rm -r --cached backend/target/
```

## 验证.gitignore是否生效

```bash
# 查看当前未跟踪的文件
git status

# 检查某个文件是否被忽略
git check-ignore -v <file>

# 查看所有被忽略的文件
git status --ignored
```

## 注意事项

1. **CSV文件规则**：所有.csv文件都被忽略，但数据库目录下的.sql文件会被保留
2. **文档文件**：Phase文档和指南文档默认保留，如需忽略可取消注释相关规则
3. **环境配置**：生产环境配置文件（application-prod.yml）已被忽略
4. **Docker数据**：Docker数据卷和日志已被忽略

## 相关文件
- 根目录：`.gitignore`
- 后端：`backend/.gitignore`
- 前端：`frontend/.gitignore`
