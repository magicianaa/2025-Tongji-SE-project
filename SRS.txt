智慧电竞酒店管理系统需求规格说明书

目录
1. 引言
1.1 目的
1.2 文档约定
1.2.1 需求优先级定义：
1.2.2 需求编号规则：
1.3 预期的读者和阅读建议
1.3.1 导师：
1.3.2 酒店经营者（模拟客户）：
1.4 产品的范围
1.4.1 系统目标
1.4.2 核心功能边界
1.5 参考文献
2. 综合描述
2.1 产品视角
2.1.1 系统架构
2.1.2 外部系统集成
2.2 功能概述
2.5 设计和实现上的限制
2.6 假设和依赖
3. 系统与其他系统的接口
3.1 用户界面
3.2 内部模拟接口
3.3 数据库接口
4. 系统特性
4.1 系统管理与认证子系统
4.1.1 说明
4.1.2 优先级
4.1.3 激励/响应序列
4.1.4 功能需求
4.2 客房与入住管理子系统
4.2.1 说明
4.2.2 优先级
4.2.3 激励/响应序列
4.2.4 功能需求
4.3 集成销售点子系统 (POS)
4.3.1 说明
4.3.2 优先级
4.3.3 激励/响应序列
4.3.4 功能需求
4.4 内部硬件模拟与监控子系统
4.4.1 说明
4.4.2 优先级
4.4.3 激励/响应序列
4.4.4 功能需求
4.5 社交匹配子系统
4.5.1 说明
4.5.2 优先级
4.5.3 激励/响应序列
4.5.4 功能需求
4.6 游戏化与积分子系统
4.6.1 说明
4.6.2 优先级
4.6.3 激励/响应序列
4.6.4 功能需求
4.7 报表与决策支持子系统
4.7.1 说明
4.7.2 优先级
4.7.3 激励/响应序列
4.7.4 功能需求
4.8 声誉与评价管理子系统
4.8.1 说明
4.8.2 优先级
4.8.3 激励/响应序列
4.8.4 功能需求
5. 非功能需求
5.1 性能需求
5.2 安全性需求
5.3 软件质量属性
5.3.1 可靠性与可用性
5.3.2 可维护性需求
5.3.3 可扩展性需求
6. 其他需求
6.1 兼容性需求
6.2 合法合规性
附录：
1. 基于场景的需求分析建模
2. 基于功能的需求分析建模
2.1 系统管理与认证子系统：
2.2 客房与入住管理子系统：
2.3 集成销售点子系统：
2.4 内部硬件模拟与监控子系统：
3. 基于类的需求分析建模
4. 基于行为的需求分析建模




1. 引言

1.1 目的
本系统为20-50间客房规模的小型电竞酒店提供一体化解决方案，取代行业现存的“酒店管理系统 + 网吧管理系统”双系统模式，实现住宿管理与电竞特色服务的深度融合,适用于潜在酒店经营者及系统用户（员工、住客）。

1.2 文档约定
1.2.1 需求优先级定义：
P0 (Critical/必须)：系统的核心功能，缺失会导致系统无法运行或无法满足核心业务闭环（如入住、退房、硬件报警）。
P1 (High/高)：关键的增值功能，缺失会严重影响用户体验或业务目标（如社交组队、积分商城）。
P2 (Medium/中)：锦上添花的功能，可在后续迭代中完善（如智能推荐算法、采购预测）。
1.2.2 需求编号规则：
采用 FR-<Module>-<ID> 格式，例如 FR-PMS-01 代表“客房管理模块”的第1条功能需求。

1.3 预期的读者和阅读建议
1.3.1 导师：
重点阅读：第 1 章（范围）、第 2 章（总体描述）和 附录（分析模型）。
目的：评估项目可行性、进度规划及架构设计的合理性。
1.3.2 酒店经营者（模拟客户）：
重点阅读：第 2.2 节（功能概述）和 第 4 章的用户场景描述。
目的：确认需求是否覆盖了真实的业务痛点。

1.4 产品的范围
1.4.1 系统目标
本系统核心目标包括：
优化酒店运营流程，降低管理成本；
保障电竞设备稳定运行，提升设备管理精细化水平；
丰富住客电竞体验与社交场景，增强用户粘性；
提供数据驱动的经营决策支持。
1.4.2 核心功能边界
包含功能：	
1.客房预订、入住、退房、结算等基础酒店业务；
2.电竞设备状态模拟监控、一键报修工单管理；
3.玩家游戏社交匹配、组队招募；
4.游戏化任务、积分商城、等级成就体系；
5.POS 集成（商品销售、外设租赁）；
6.运营报表、满意度评价管理；
7.多角色权限控制与数据安全保障。
排除功能：
1.真实硬件设备（如显卡、门锁）的直接控制；
2.真实金融支付网关对接（仅支持沙箱环境模拟）；
3.第三方游戏官方 API 直接调用（用户手动录入游戏信息）；
4.大型连锁酒店的多门店协同管理功能。

1.5 参考文献
IEEE Std 830-1998，《Software Requirements Specification》；
《中华人民共和国网络安全法》《中华人民共和国个人信息保护法》；
Spring Boot 3.0 官方文档、Vue.js 3 官方文档、MySQL 8.0 技术规范。


2.综合描述

2.1 产品视角
2.1.1 系统架构
本系统采用 B/S（Browser/Server）架构，整体分为三层：
前端层：包含管理端（Admin Web）和住客端（Guest Web/H5），无需安装客户端，通过浏览器即可访问；
后端层：基于 Java Spring Boot 的模块化单体架构，集成硬件状态模拟服务、业务逻辑服务、数据持久化服务，提供 RESTful API 和 WebSocket 实时通信服务；
数据层：采用 MySQL 8.0 存储业务数据，Redis 用于缓存高频访问数据（如在线玩家状态、房态）。
2.1.2 外部系统集成
系统需与以下外部系统 / 组件实现模拟集成或接口对接：
支付系统沙箱：模拟支付宝、微信支付的支付流程，不涉及真实资金流转；
硬件状态模拟器：由 Java 编写的内置模块，生成虚拟硬件遥测数据（替代真实硬件监控）；
浏览器环境：支持 Chrome 90+、Edge 90+、Firefox 88+ 等主流浏览器。

2.2 功能概述
系统核心功能分为四大模块，各模块协同实现 “管理一体化、体验沉浸式” 目标：
基础酒店运营模块：覆盖客房预订、入住登记、房态管理、退房结算、POS 消费（商品 / 外设租赁）等标准化酒店业务；
电竞设备管理模块：通过模拟数据实现设备状态实时监控、异常报警、一键报修工单流转、维护记录管理；
电竞社交与游戏化模块：包含玩家电竞档案管理、智能组队匹配、招募发布、任务积分体系、等级成就、积分商城；
数据决策与评价模块：提供运营数据看板、多维度报表（财务、库存、积分）、住客满意度评价与管理。

2.3 用户类和特征
酒店管理员/经理熟悉基础电脑操作，了解酒店运营逻辑，宏观监控运营状态、查看报表、配置积分规则、管理评价，每日/每周查看数据看板、调整积分商城商品、处理低分评价
前台熟练使用办公软件，具备基础故障判断能力	快速办理入住退房、响应设备报警、处理报修工单、管理商品库存，高峰期办理入住、实时处理设备故障、补充商品库存
电竞住客精通互联网应用，对 UI/UX 敏感，熟悉主流电竞游戏，便捷预订入住、稳定设备体验、寻找队友、完成任务获取积分，入住时录入游戏信息、住店期间组队开黑，便捷退房，退房前兑换积分

2.4 运行环境
2.4.1 硬件环境
部署节点	最低配置要求
服务器	CPU：Intel Core i5 或 equivalent；内存：8GB；存储：100GB SSD；网络：100Mbps 带宽
客户端（员工）	CPU：Intel Core i3 或 equivalent；内存：4GB；分辨率：1920x1080
客户端（住客）	客房电脑：CPU：Intel Core i5 或 equivalent；内存：8GB；网络：稳定 Wi-Fi / 有线网络；支持 WebSocket 协议
2.4.2 软件环境
技术栈要求:
后端:Java 21（jdk21）、Spring Boot 3.0+、MySQL 8.0、WebSocket、Docker 20.10+
前端:Vue.js 3、Element Plus、Responsive Design（响应式设计）
操作系统:服务器：Linux（Ubuntu 20.04+）；客户端：Windows 10+、macOS 11+


2.5 设计和实现上的限制
技术约束：系统需采用模块化设计，支持后续功能扩展（如对接真实支付网关、新增游戏类型）；所有 API 需符合 RESTful 规范，便于前后端分离开发；
合规约束：严格遵守《网络安全法》《个人信息保护法》，用户敏感信息（身份证号、手机号）必须加密存储并脱敏展示；
资源约束：无真实酒店生产数据和硬件设备，依赖模拟环境完成测试；无法调用第三方游戏官方 API，玩家游戏信息需手动录入；
时间约束：开发周期有限，优先实现 P0/P1 级需求（基础运营、核心电竞特色功能），P2/P3 级需求（高级社交、复杂匹配算法）可迭代优化。

2.6 假设和依赖
假设客房网络环境稳定，支持 WebSocket 长连接，无频繁断网或高延迟情况；
假设硬件模拟数据格式统一（JSON 格式），且生成逻辑符合预设规则（如温度 40-95°C 波动）；
依赖团队成员按时完成新技术学习（Vue.js、Docker），确保开发进度；
依赖模拟支付环境、硬件模拟器正常运行，否则无法验证支付流程和设备监控功能。

3.系统与其他系统的接口

3.1 用户界面
管理端：适配 1920x1080 分辨率 PC 浏览器，侧重信息密度和数据可视化。
住客端：响应式设计，适配 PC (房间电脑) 和 Mobile (手机扫码)。

3.2 内部模拟接口
注意：此处不再是网络接口，而是代码层面的 Service 接口定义。
SimulationService.startSimulation(roomId): 开始为指定房间生成数据。
SimulationService.stopSimulation(roomId): 停止生成。
SimulationService.setFailureRate(percentage): 设置模拟故障发生的概率（用于演示）。

3.3 数据库接口
使用 MySQL 8.0，通过 MyBatis/JPA 进行数据持久化。
关键表结构包括：User, Room, DeviceLog, SocialRequest, PointsHistory等.

4.系统特性
详细需求的分析模型间附录B
4.1 系统管理与认证子系统
4.1.1 说明
管理用户的全生命周期，包括注册、登录、档案维护。核心创新在于“入住后二次鉴权”机制，将账号权限与客房物理状态动态绑定。
4.1.2 优先级
P0 (核心基础)
4.1.3 激励/响应序列
激励：住客办理入住后，首次在客房内点击“电竞服务”。
响应：系统自动核验当前账号的有效入住订单，绑定房间号，解锁“住店用户权限”，并根据会员等级加载特权配置。
4.1.4 功能需求
FR-SYS-01 用户注册与档案：支持手机号注册，用户可设置电竞偏好（如擅长位置、游戏类型）。
FR-SYS-02 通用登录：支持账号密码或手机验证码登录，授予基础浏览权限。
FR-SYS-03 二次鉴权（客房绑定）：当用户访问受限接口（如报警、点餐）时，系统需校验 CheckInRecord，若有效则注入 RoomID 到会话中。
FR-SYS-04 权限自动回收：检测到退房事件后，立即剥夺该账号的客房控制权限。

4.2 客房与入住管理子系统
4.2.1 说明
覆盖酒店标准业务流。支持住客自助预订、前台办理入住（含Walk-in）、故障换房及统一结算。
4.2.2 优先级
P0 (核心基础)
4.2.3 激励/响应序列
激励：前台员工点击“办理退房”。
响应：系统自动冻结房态，汇总房费、POS挂账及赔偿金，生成最终账单，确认支付后释放房间为 脏房。
4.2.4 功能需求
FR-PMS-01 房态管理：维护空闲、入住、维修、脏房四种状态的流转。
FR-PMS-02 预订管理：支持在线预订与取消，高等级会员享有预定折扣。
FR-PMS-03 入住登记：录入实名信息，分配房间，触发系统管理子系统的权限绑定。
FR-PMS-04 故障换房：支持因设备故障将住客迁移至备用房，自动迁移订单关联与权限绑定。
FR-PMS-05 统一结算：集成多渠道支付（模拟），支持分账单展示。

4.3 集成销售点子系统 (POS)
4.3.1 说明
提供零食饮料销售及高端外设租赁服务，支持库存管理与挂账支付。
4.3.2 优先级
P1 (重要增值)
4.3.3 激励/响应序列
激励：住客提交“租赁机械键盘”订单。
响应：系统锁定库存 -> 通知前台配送 -> 确认送达 -> 扣减库存并挂账 -> 开始按小时计费。
4.3.4 功能需求
FR-POS-01 商品目录：展示商品图片、价格及实时库存，区分“销售型”与“租赁型”商品。
FR-POS-02 订单处理：支持购物车下单，系统需处理并发库存扣减（乐观锁）。
FR-POS-03 外设租赁闭环：包含借出登记与归还检查，支持损坏赔偿录入。
FR-POS-04 挂账结算：所有消费默认计入客房总账，待退房时统一支付。

4.4 内部硬件模拟与监控子系统
4.4.1 说明
利用后台服务（后端模拟）模拟硬件遥测数据（温度、网络），提供三色监控大屏，支持自动报警与住客报修。
4.4.2 优先级
P0 (技术亮点)
4.4.3 激励/响应序列
激励：后端模拟程序生成显卡温度 98°C 的数据连续 3 次。
响应：大屏对应房间变红，管理员收到弹窗报警，系统自动生成“维修工单”并通知维修人员。
4.4.4 功能需求
FR-MON-01 数据模拟器：后端程序按正态分布生成 CPU/GPU 温度、网络延迟数据，支持配置故障生成概率。
FR-MON-02 实时监控大屏：以房间布局图形式展示全店设备健康度（红/黄/绿）。
FR-MON-03 主动报修：住客可发起“一键报修”，选择诉求（维修或申请换房）。
FR-MON-04 工单流转：支持工单的生成、指派、处理完成及归档，维修期间自动锁定 PMS 房态。

4.5 社交匹配子系统
4.5.1 说明
基于住客地理位置（同酒店）的社交平台，支持段位展示、大厅招募及临时战队组建。
4.5.2 优先级
P1 (体验核心)
4.5.3 激励/响应序列
激励：住客在大厅发布“缺辅助”招募令。
响应：其他住客收到推送，点击申请 -> 队长同意 -> 系统创建临时战队并展示双方房号。
4.5.4 功能需求
FR-SOC-01 游戏档案：登记入住期间的游戏账号、段位、擅长位置（非强制绑定）。
FR-SOC-02 在线大厅：浏览店内在线玩家，支持按段位筛选。
FR-SOC-03 组队管理：支持发起招募、申请入队、踢人及解散战队。
FR-SOC-04 战绩追踪：记录临时战队的共同游戏时长，作为积分奖励依据。

4.6 游戏化与积分子系统
4.6.1 说明
通过任务体系（五杀、好评）激励住客，积分可用于兑换延迟退房等实际权益。
4.6.2 优先级
P1 (粘性核心)
4.6.3 激励/响应序列
激励：住客上传“五杀截图”。
响应：前台后台审核通过 -> 系统发放积分 -> 住客收到通知 -> 住客消耗积分兑换“延迟退房 1 小时”。
4.6.4 功能需求
FR-GAME-01 任务体系：支持系统自动检测任务（如时长）和人工审核任务（如截图）。
FR-GAME-02 审核工作台：提供前台人员审核凭证的界面。
FR-GAME-03 积分商城：支持兑换实物商品（走POS流程）或服务权益（走PMS流程）。
FR-GAME-04 会员成长：依据经验值划分青铜/白银/黄金等级，等级越高特权越多。

4.7 报表与决策支持子系统
4.7.1 说明
提供运营看板及多维度报表。特色功能是基于维修日志的硬件损耗分析与采购预测。
4.7.2 优先级
P2 (管理辅助)
4.7.3 激励/响应序列
激励：管理员进入“采购预测”页面。
响应：系统分析近 30 天维修工单，识别高频故障外设（如某型号鼠标微动），结合库存生成建议采购清单。
4.7.4 功能需求
FR-RPT-01 运营看板：实时展示入住率、RevPAR（平均客房收益）、待处理报警数。
FR-RPT-02 财务报表：生成日报、月报，支持导出 Excel。
FR-RPT-03 损耗分析：统计各品牌/型号外设的故障率，辅助采购决策。

4.8 声誉与评价管理子系统
4.8.1 说明
收集住客反馈，重点构建低分预警与回访闭环，提升酒店服务质量。
4.8.2 优先级
P2 (运营辅助)
4.8.3 激励/响应序列
激励：住客提交 2 星评价。
响应：系统高亮标记该评价 -> 推送通知给管理员 -> 管理员回访并登记结果 -> 评价标记为“已处理”。
4.8.4 功能需求
FR-FDB-01 评价提交：支持评分（1-5星）及文本评论。
FR-FDB-02 低分预警：评分低于 3 星自动触发内部报警。
FR-FDB-03 回访闭环：管理员可对评价记录回访备注及处理结果。

5.非功能需求

5.1 性能需求
响应时间：一般页面加载时间不超过 2 秒。
报警延迟：从模拟器发出“过热”数据到管理端显示报警，端到端延迟不超过 3 秒。
并发能力：内置模拟线程池应能同时处理至少 50 个房间的数据生成，且不阻塞主业务线程（如结账、下单）。
数据一致性：POS 消费挂账必须保证事务一致性，即库存扣减和账单增加必须同时成功或同时失败。

5.2 安全性需求
数据隐私： 住客的身份证号在数据库中需加密存储，在前端展示时需脱敏（如 3201**********1234）。
接口鉴权： 所有 API 请求需携带 Token (JWT) 进行身份验证，防止未授权访问。

5.3 软件质量属性
5.3.1 可靠性与可用性
容错性： 当某个房间的模拟器发送格式错误的数据时，后端应记录错误日志并丢弃，而不应导致整个服务崩溃。
部署：系统应支持Docker容器化部署，以便于快速恢复。

5.3.2 可维护性需求
系统采用模块化设计，各功能模块低耦合，支持单独升级或修改（如后续新增游戏类型，无需改动其他模块）；
代码需添加规范注释（类注释、方法注释），核心业务逻辑需提供文档说明；
支持日志分级输出（DEBUG/INFO/WARN/ERROR），便于问题定位和排查。

5.3.3 可扩展性需求
系统架构支持后续扩展第三方接口（如真实支付网关、游戏官方 API）；
支持新增房型（如电竞五人房）、新增游戏类型（如《原神》）、新增积分兑换商品，无需重构核心代码；
数据库设计支持水平扩展（如分表存储大量监控日志）。

6.其他需求

6.1兼容性需求
浏览器兼容性：兼容 Chrome 90+、Edge 90+、Firefox 88+、Safari 14+ 主流 PC 浏览器，所有浏览器环境下，系统功能无缺失、UI 无错乱、交互无异常。
数据格式兼容性：报表导出格式（Excel/CSV）兼容 Microsoft Excel 2016+、WPS 2019+办公软件；图片兼容 JPG、PNG格式，支持透明背景图片正常显示；模拟硬件数据 JSON 格式兼容后端解析逻辑，核心字段缺失时返回明确错误日志。
系统版本兼容性：后端支持与 MySQL 8.0+ 所有稳定版本兼容，Redis 6.0+ 所有稳定版本兼容；Docker 部署时，支持 Docker 20.10+ 版本，容器启动后无需额外配置即可正常运行

6.2合法合规性 
系统需严格遵守国家法律法规及行业规范，保障用户权益、数据安全及业务合规。
个人信息保护合规：遵循《个人信息保护法》，收集住客身份证号、手机号等敏感信息时，需明确告知收集目的、使用范围及存储期限，获得用户主动同意（勾选授权框）后方可收集；敏感信息加密存储（AES 加密），传输过程采用 HTTPS 协议，前端展示时脱敏（身份证号隐藏中间 8 位，手机号隐藏中间 4 位）。
内容合规性：积分商城商品、租赁外设需符合国家产品质量标准，禁止上架违禁品（如管制器具、盗版游戏周边）；系统内无侵权内容，使用的第三方技术（Vue.js、Spring Boot 等）均为开源合规版本，无知识产权纠纷。
金融相关合规：仅模拟支付流程（沙箱环境），不涉及真实资金交易，不存储支付账户密码、验证码等敏感信息；不开展非法金融活动（如虚拟货币交易、非法集资类积分兑换），积分仅用于系统内服务 / 商品兑换，不可提现。

附录A:词汇表
术语 / 缩写	全称 / 定义
SRS	Software Requirement Specification（软件需求规格说明书）
PMS	Property Management System（酒店物业管理系统）
POS	Point of Sale（销售点系统）
Telemetry	遥测数据，指客房电脑模拟发送的硬件状态数据（如 CPU 温度、网络延迟）
Agent	代理程序，运行在客房端的模拟脚本，负责定时推送硬件状态心跳包
Lobby	系统内社交匹配大厅，供玩家发布招募、查看队友推荐
RBAC	Role-Based Access Control（基于角色的访问控制）
JWT	JSON Web Token（用于接口鉴权的轻量级令牌）

附录B:分析模型
1.基于场景的需求分析建模
1.1 系统管理与认证子系统
子系统名称	系统管理与认证子系统
概览：
管理账号全生命周期。支持住客注册、通用登录、个人档案维护。核心功能是二次鉴权机制，确保只有“入住中”的账号才能调用客房硬件及服务接口。
参与人员：住客、前台员工、酒店管理员
前置条件：
1.数据库服务正常运行。
2. 短信验证码服务可用（用于注册/重置密码）。
基本路径：
1.注册：住客访问系统，输入手机号及验证码，系统创建新账户。
2.档案设置：住客登录后完善个人信息及电竞偏好（如“FPS玩家”）。
3.登录：用户输入账号密码，系统验证通过后授予“普通用户权限”。
额外路径：
1.客房权限绑定（二次鉴权）：
1.1住客办理入住后，尝试访问“电竞服务”或“客房点餐”。
1.2系统自动核验该账号是否存在有效入住订单。
1.3核验通过，系统绑定当前房间号，并根据会员等级解锁特权。
2.权限回收：
2.1 住客退房，系统自动解绑房间权限，重置为普通用户状态。
后置条件:用户会话状态更新，操作日志入库，权限令牌（Token）动态刷新。


1.2 客房与入住管理子系统
子系统名称:客房与入住管理子系统
概览:核心住宿业务。支持优先预订、自助/辅助入住、故障换房处理及退房结算。
参与人员:住客、前台员工
前置条件:
住客已完成注册并登录系统。
基本路径:
1. 在线预订：住客查询房态，提交预订订单并支付。
2. 办理入住：住客到店，前台确认身份，分配房间，更新房态为“入住中”，触发子系统1的权限绑定。
3. 退房结算：住客发起退房，前台确认消费明细（含POS挂账），完成结算。
额外路径:
1.折扣预订：
1.1若住客为高等级会员，系统提供预定折扣。
2.故障换房：
2.1因设备故障申请换房。
2.2前台查询“备用房间”并执行换房操作。
2.3系统迁移订单关联，旧房转“维修中”，新房转“入住中”，迁移权限绑定。
3.Walk-in：
3.1 无预订住客直接到店，前台现场创建订单。
后置条件:房态流转更新，会员积分累积，入住历史归档。


1.3 集成销售点子系统
子系统名称:集成销售点子系统
概览:提供商品购买、高端外设租赁及库存管理。支持挂账和在线支付。
参与人员:住客、前台员工、酒店管理员
前置条件:住客已入住（具备二次鉴权权限）。
基本路径:
1. 浏览与下单：住客在客房端选择商品或外设（如租赁机械键盘），提交订单。
2. 库存锁定：系统校验并锁定库存。
3. 配送：前台员工收到通知进行配送。
4. 确认送达：员工确认后，系统扣减库存，费用挂账至客房账单。
额外路径:
1.外设归还：
1.1住客申请归还外设。
1.2员工检查设备完好并在系统确认。
1.3系统释放库存，停止租赁计费。
2.库存预警：
2.1 商品库存低于阈值，系统通知管理员补货。
后置条件:库存数量更新，住客消费账单更新。

1.4 内部硬件模拟与监控子系统
子系统名称:内部硬件模拟与监控子系统
概览:模拟生成硬件数据，提供三色监控大屏。支持自动报警及住客一键报修（含维修或换房诉求）。
参与人员:酒店管理员、住客
前置条件:住客已入住，模拟服务正在运行。
基本路径:
1.自动监控：系统模拟生成数据，管理员通过红（严重）、黄（预警）、绿（正常）大屏监控全店。
2.自动报警：若数据连续异常，系统推送报警，管理员生成维修工单。
额外路径:
1.主动报修：
1.1住客点击“一键报修”，选择诉求（呼叫工程师 或 申请换房）。
1.2系统生成工单通知管理员。
1.3若申请换房，管理员确认后触发PMS换房流程。
2.采购预测：
2.1系统记录模拟的硬件损耗数据。
2.2 生成损耗报告供采购参考。
后置条件:生成维修工单，PMS中对应房间状态可能变为“维修中”。

1.5 社交匹配子系统
子系统名称:社交匹配子系统
概览:住客填写入住期间的游戏信息，寻找队友并组建临时战队，支持赛后社交。
参与人员:住客
前置条件:住客已入住（具备二次鉴权权限）。
基本路径:
1. 登记信息：住客填写入住期间游戏账号及段位（不强制绑定）。
2. 大厅交互：住客浏览大厅或发起招募。
3. 组队：匹配成功后，住客创建“临时战队”。
4. 战绩记录：系统记录战队在店期间的共同战绩。
额外路径:
1.智能推荐：
1.1系统根据段位算法推荐合适队友。
2.赛后社交：
2.1临时战队解散。
2.2 住客发送“交换联系方式”请求，对方同意后展示微信/QQ。
后置条件:战绩记录入库（用于积分奖励），社交关系建立。


1.6 游戏化与积分子系统
子系统名称:游戏化与积分子系统
概览:通过任务（如五杀、好评）激励住客，积分可兑换奖品、延迟退房或抵扣房费。
参与人员:住客、前台员工
前置条件:住客已入住。
基本路径:
1.提交凭证：住客查看任务并上传截图（如战绩、好评）。
2.审核：前台员工后台审核通过。
3.发放：系统发放积分，累积经验值。
4.兑换：住客消耗积分兑换商品或权益。
额外路径:
1.权益兑换：
1.1住客选择“延迟退房”或“房费抵扣”。
1.2系统通知PMS更新订单状态。
2.会员升级：
2.1 经验值达标，升级为“黄金房客”，自动发放特权券。
后置条件:积分余额变更，会员等级更新，订单信息更新。

1.7 报表与决策支持子系统
子系统名称:报表与决策支持子系统
概览:提供运营、财务报表。核心特色是硬件损耗分析与采购预测。
参与人员:酒店管理员
前置条件:系统积累了足够的历史业务数据。
基本路径:
1.查看看板：管理员查看实时入住率、营收等指标。
2.生成报表：管理员选择时间段，生成财务报表。
3.导出：导出数据为 Excel。
额外路径:
1.采购预测：
1.1管理员访问“硬件损耗分析”。
1.2系统统计高频故障设备及损耗趋势。
1.3生成“建议采购清单”。
2.积分成本分析：
2.1 统计积分兑换造成的成本支出占比。
后置条件:生成决策辅助报告。

1.8 声誉与评价管理子系统
子系统名称:声誉与评价管理子系统
概览:收集住客反馈，重点处理低分评价的预警与回访。
参与人员:住客、酒店管理员
前置条件:住客已退房或入住中。
基本路径:
1. 提交评价：住客提交评分及文字评价。
2. 查看评价：管理员查看评价列表，系统计算综合评分。
额外路径:
1.低分闭环处理：
1.1住客打低分（<3星）。
1.2系统高亮预警并通知管理员。
1.3 管理员联系住客，并在系统登记“回访结果”。
后置条件:评价入库，更新店铺声誉分值。



2.基于功能的需求分析建模
2.1系统管理与认证子系统：
泳道图：
@startuml
title 系统管理与认证流程：注册、登录与客房权限绑定

|住客|
start
:进入系统首页;
if (已有账号?) then (否)
    :输入手机号/验证码;
    |系统|
    :验证短信验证码;
    :创建新用户记录;
    |住客|
    :设置初始密码;
    :完善电竞偏好档案\n(如：FPS玩家, 喜欢安静);
endif

|住客|
:输入账号密码登录;
|系统|
:验证凭证;
if (验证通过?) then (否)
    :提示错误;
    stop
else (是)
    :生成普通用户 Token;
    note right
        此时用户仅拥有
        浏览房型、预订等基础权限
    end note
endif

|住客|
:尝试访问"客房服务"\n(如点餐、社交);
|系统|
:触发二次鉴权流程;
:查询 PMS 数据库;
if (存在有效入住订单?) then (是)
    :获取房间号 & 会员等级;
    :绑定当前会话与房间号;
    if (是黄金/白金会员?) then (是)
        :解锁会员专属特权\n(如专属带宽标识);
    endif
    :更新 Token 权限位\n(授予住店权限);
    :跳转至服务主页;
else (否)
    :提示"请先办理入住";
    :跳转回普通主页;
endif

stop
@enduml

2.2客房与入住管理子系统：
泳道图：
@startuml
title PMS 核心业务流程：预订、入住、换房与退房

|住客|
start
:查询房态;
if (是高等级会员?) then (是)
    |系统|
    :解锁紧俏/保留房型;
endif
|住客|
:提交预订订单并支付;

|住客|
:到店，出示证件;
|前台员工|
:核验身份与订单;
if (有空闲备用房 OR 预留房?) then (是)
    :分配房间;
    |系统|
    :更新房态 -> "入住中";
    :触发 [子系统1] 权限绑定;
else (无房)
    :协调处理/升级房型;
endif

|住客|
:入住期间;
if (设备故障需换房?) then (是)
    :发起换房申请;
    |前台员工|
    :确认故障情况;
    :查询并分配新房间;
    |系统|
    :执行换房逻辑;
    fork
        :原房间 -> "维修中";
        :生成维修工单;
    fork again
        :新房间 -> "入住中";
        :迁移住客权限绑定;
    end fork
endif

|住客|
:申请退房;
|前台员工|
:发起退房结算;
|系统|
:汇总账单;
note right
    包含：
    1. 基础房费
    2. POS 挂账消费
    3. 赔偿金(如有)
    4. 扣除积分抵扣额
end note
|住客|
:支付剩余尾款;
|系统|
:解除房间权限绑定;
:房态 -> "脏房";
stop
@enduml

2.3集成销售点子系统：
泳道图：
@startuml
title POS 业务流程：商品购买与外设租赁

|住客|
start
:进入客房服务页面;
:浏览商品/外设目录;
if (选择类型?) then (普通商品)
    :添加到购物车;
    :提交订单;
    
    |系统|
    :校验库存;
    if (库存不足?) then (是)
        :提示缺货;
        stop
    else (足)
        :锁定库存;
        :通知前台;
    endif
    
    |前台员工|
    :备货并配送至房间;
    :在系统确认"已送达";
    
    |系统|
    :扣减库存;
    :费用挂账至客房单;
    stop
else (外设租赁)
    |住客|
    :选择高端外设(如手柄);
    :确认租赁协议;
    
    |系统|
    :校验库存 & 信用分;
    :生成租赁单(开始计费);
    
    |前台员工|
    :送设备上门;
    
    |住客|
    :...使用中...;
    :申请归还设备;
    
    |前台员工|
    :上门/前台回收;
    if (设备完好?) then (是)
        |系统|
        :停止计费;
        :释放库存;
        stop
    else (损坏)
        |系统|
        :生成赔偿账单;
        :标记设备需维修;
        stop
    endif
endif

@enduml

2.4内部硬件模拟与监控子系统：
泳道图：
@startuml
title 硬件监控与报修流程 (自动 + 主动)

|模拟服务 (Backend)|
start
:定时任务启动 (每5秒);
:生成随机硬件数据;
note right
    参数包括:
    CPU/GPU温度
    网络延迟
    外设连接状态
end note
:应用概率故障算法;
if (数据异常?) then (是)
    :标记为黄色(预警)或红色(严重);
else (否)
    :标记为绿色(正常);
endif
:推送至 WebSocket;

|酒店管理员|
:查看监控大屏;
if (收到红色报警?) then (是)
    :查看报警详情;
    :主动创建维修工单;
else (否)
    |住客|
    if (发现设备问题?) then (是)
        :点击"一键报修";
        :选择诉求;
        split
            :呼叫工程师;
        split again
            :申请换房;
        end split
        |系统|
        :生成报修工单;
        :通知管理员;
    endif
endif

|系统|
:记录故障日志;
note right
    用于后续的
    [采购预测分析]
end note
:锁定相关PMS房态\n(若严重故障);
stop
@enduml

2.5社交匹配子系统：
泳道图：
@startuml
title 社交匹配与组队流程

|住客 (队长)|
start
:登录并进入大厅;
:登记游戏段位/位置\n(本次入住有效);
if (方式选择?) then (主动招募)
    :发布招募令\n(如: 缺辅助, 白金段位);
    |系统|
    :在大厅广播招募信息;
    |住客 (队友)|
    :浏览大厅/接收推荐;
    :点击"申请加入";
    |住客 (队长)|
    :收到申请弹窗;
    if (同意加入?) then (是)
        |系统|
        :创建[临时战队];
        :展示双方房号/座位号;
        :开启战绩追踪;
    else (拒绝)
        :通知队友被拒;
        stop
    endif
else (智能匹配)
    |住客 (队长)|
    :点击"一键匹配";
    |系统|
    :运行段位匹配算法;
    :寻找相似水平的空闲玩家;
    :自动组成战队;
endif

|临时战队|
:进行游戏;
|系统|
:记录共同游戏时长/战绩;

|住客 (队长)|
:解散战队/退房;
|系统|
:结算社交积分奖励;
|住客 (队长)|
:发起"交换联系方式";
if (队友同意?) then (是)
    |系统|
    :展示双方微信/QQ;
endif
stop
@enduml

2.6游戏化与积分子系统：
泳道图：
@startuml
title 游戏化任务与积分兑换流程

|住客|
start
:查看每日任务;
if (任务类型?) then (自动检测类)
    :完成行为(如入住满4小时);
    |系统|
    :自动监测达标;
    :自动发放积分;
else (人工审核类)
    :完成游戏成就(如五杀);
    :上传战绩截图;
    |前台员工|
    :收到审核任务;
    :核对图片真实性;
    if (通过?) then (是)
        |系统|
        :发放积分 & 经验值;
        :推送通知给住客;
    else (驳回)
        :填写驳回原因;
        stop
    endif
endif

|系统|
:检测会员经验值;
if (达到升级阈值?) then (是)
    :升级会员等级\n(如: 白银->黄金);
    :发放升级礼包(优惠券);
endif

|住客|
:进入积分商城;
:选择兑换项目;
if (项目类型?) then (实物商品)
    :兑换饮料/外设;
    :生成POS配送单;
else (服务权益)
    :兑换[延迟退房]或[抵扣房费];
    |系统|
    :调用PMS接口;
    :更新订单离店时间或余额;
endif
stop
@enduml

2.7报表与决策支持子系统：
泳道图：
@startuml
title 报表生成与决策分析流程

|酒店管理员|
start
:进入数据决策中心;
:选择报表类型;

fork
    :运营/财务报表;
    |系统|
    :聚合PMS订单数据;
    :计算入住率/RevPAR;
    :生成营收趋势图;
fork again
    :硬件损耗与采购分析;
    |系统|
    :读取[子系统4]故障日志;
    :分析高频故障设备;
    note right
        例如:
        统计罗技鼠标微动
        故障频率
    end note
    :结合库存余量;
    :生成[建议采购清单];
fork again
    :积分成本分析;
    |系统|
    :统计积分兑换总额;
    :计算营销成本占比;
end fork

|系统|
:渲染可视化图表;
|酒店管理员|
:查看分析结果;
:导出 Excel/PDF;
stop
@enduml

2.8声誉与评价管理子系统：
泳道图：
@startuml
title 评价管理与低分预警流程

|住客|
start
:退房后/入住中;
:收到评价邀请;
:填写评分(1-5星)及内容;
:提交评价;

|系统|
:保存评价数据;
:计算店铺综合评分;

if (评分 < 3星?) then (是)
    :触发[低分预警];
    :高亮标记评价;
    :推送通知给管理员;
    
    |酒店管理员|
    :查看差评详情;
    :电话/微信回访住客;
    :了解不满原因;
    
    if (需要补偿?) then (是)
        :手动赠送积分/优惠券;
    endif
    
    :在系统登记"回访结果";
    :标记为"已处理";
else (否)
    |系统|
    :正常展示评价;
    if (是5星好评?) then (是)
        :触发[子系统6]任务奖励;
        :自动发放好评积分;
    endif
endif
stop
@enduml


3.基于类的需求分析建模
系统类图：
@startuml
skinparam classAttributeIconSize 0
scale 0.8

package "1. 认证与用户 (Auth & User)" {
    class User {
        - userId: Long
        - username: String
        - passwordHash: String
        - phone: String
        + login(): String
        + updateProfile(): void
    }

    class Guest {
        - identityCard: String
        - memberLevel: MemberLevel
        - currentPoints: Integer
        + register(): void
        + requestSecondaryAuth(): boolean
    }

    class Staff {
        - employeeId: String
        - role: RoleType
        + handleCheckIn(): void
    }
    
    enum MemberLevel {
        BRONZE
        SILVER
        GOLD
    }

    User <|-- Guest
    User <|-- Staff
    Guest "1" *-- "1" GamingProfile : has >
}

package "5. 社交 (Social)" {
    class GamingProfile {
        - gameId: String
        - rank: String
        - preferredPosition: String
        + updateStats(): void
    }

    class Team {
        - teamId: Long
        - createTime: DateTime
        - status: TeamStatus
        + addMember(Guest): void
        + disband(): void
    }
    
    class Recruitment {
        - reqRank: String
        - description: String
    }
    
    Team "1" o-- "1..5" Guest : members
    Guest "1" ..> "1" Recruitment : posts >
}

package "2. 客房管理 (PMS)" {
    class Room {
        - roomNo: String
        - type: RoomType
        - status: RoomStatus
        - pricePerHour: Decimal
        + updateStatus(RoomStatus): void
    }

    class Booking {
        - bookingId: Long
        - checkInTime: DateTime
        - checkOutTime: DateTime
        - status: BookingStatus
        + cancel(): void
        + payDeposit(): void
    }

    class CheckInRecord {
        - recordId: Long
        - actualCheckIn: DateTime
        - actualCheckOut: DateTime
        - isGamingAuthActive: boolean
        + checkOut(): Bill
        + bindAuth(): void
    }

    enum RoomStatus {
        VACANT
        OCCUPIED
        DIRTY
        MAINTENANCE
    }

    Room "1" -- "0..*" Booking : reserved for >
    Guest "1" -- "0..*" Booking : makes >
    Booking "1" ..> "1" CheckInRecord : converts to >
    Room "1" -- "0..*" CheckInRecord : hosts >
    CheckInRecord "1" -- "1..*" Guest : occupants
}

package "3. 销售点 (POS)" {
    abstract class Product {
        - productId: Long
        - name: String
        - price: Decimal
        - stock: Integer
    }
    
    class Snack extends Product {
        - expirationDate: Date
    }
    
    class Peripheral extends Product {
        - deviceModel: String
        - hourlyRate: Decimal
    }

    class Order {
        - orderId: Long
        - createTime: DateTime
        - status: OrderStatus
        - totalAmount: Decimal
        + addItem(Product, qty): void
        + chargeToRoom(): void
    }

    class OrderItem {
        - quantity: Integer
        - subTotal: Decimal
    }

    CheckInRecord "1" -- "0..*" Order : linked to >
    Order "1" *-- "1..*" OrderItem
    OrderItem "1" -- "1" Product
}

package "4. 硬件监控 (Hardware)" {
    class HardwareSimulator {
        - threadId: Long
        + generateTelemetry(roomId): TelemetryData
    }

    class HardwareStatus {
        - cpuTemp: Float
        - gpuTemp: Float
        - networkLatency: Integer
        - lastUpdate: DateTime
        + checkThreshold(): boolean
    }

    class MaintenanceTicket {
        - ticketId: Long
        - description: String
        - status: TicketStatus
        - requestType: RequestType
        + resolve(): void
    }

    Room "1" *-- "1" HardwareStatus : monitored by >
    HardwareSimulator ..> HardwareStatus : updates >
    Room "1" -- "0..*" MaintenanceTicket : has issue >
    Guest ..> MaintenanceTicket : reports >
}

package "6. 游戏化 (Gamification)" {
    class Task {
        - description: String
        - rewardPoints: Integer
        - type: TaskType
    }
    
    class TaskRecord {
        - proofImage: String
        - status: AuditStatus
        + submitProof(): void
        + approve(): void
    }
    
    class PointTransaction {
        - amount: Integer
        - reason: String
        - time: DateTime
    }

    Guest "1" -- "0..*" TaskRecord : attempts >
    Task "1" -- "0..*" TaskRecord : instance of >
    Guest "1" -- "0..*" PointTransaction : history >
}

package "7. 报表 (Reporting)" {
    class ReportGenerator {
        + generateFinancialReport(DateRange): File
        + generateHardwareLossReport(): File
    }
}

package "8. 评价 (Reputation)" {
    class Review {
        - score: Integer
        - comment: String
        - reply: String
        - isLowScore: boolean
    }
    CheckInRecord "1" -- "0..1" Review : generates >
}

@enduml